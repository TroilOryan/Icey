group = "com.audio.audio_query"
version = "1.0-SNAPSHOT"

buildscript {
  ext.kotlin_version = "2.1.0"
  repositories {
    google()
    mavenCentral()
  }

  dependencies {
    classpath("com.android.tools.build:gradle:8.9.1")
    classpath("org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version")
  }
}

allprojects {
  repositories {
    google()
    mavenCentral()
  }
}

apply plugin: "com.android.library"
apply plugin: "kotlin-android"

android {
  namespace = "com.audio.audio_query"

  compileSdk = 36

  compileOptions {
    sourceCompatibility = JavaVersion.VERSION_11
    targetCompatibility = JavaVersion.VERSION_11
  }

  kotlinOptions {
    jvmTarget = JavaVersion.VERSION_11
  }

  sourceSets {
    main.java.srcDirs += "src/main/kotlin"
    test.java.srcDirs += "src/test/kotlin"
  }

  defaultConfig {
    minSdk = 24
  }

  dependencies {
    def lifecycle_version = "2.3.1"
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-core:1.6.4'
    implementation 'org.jetbrains.kotlinx:kotlinx-coroutines-android:1.6.4'
    implementation "androidx.lifecycle:lifecycle-viewmodel-ktx:$lifecycle_version"
    implementation 'androidx.palette:palette:1.0.0'

    testImplementation("org.jetbrains.kotlin:kotlin-test")
    testImplementation("org.mockito:mockito-core:5.0.0")
  }

  testOptions {
    unitTests.all {
      useJUnitPlatform()

      testLogging {
        events "passed", "skipped", "failed", "standardOut", "standardError"
        outputs.upToDateWhen { false }
        showStandardStreams = true
      }
    }
  }
}

//def localProperties = new Properties()
//def localPropertiesFile = rootProject.file('local.properties')
//if (localPropertiesFile.exists()) {
//  localPropertiesFile.withReader('UTF-8') { reader -> localProperties.load(reader) }
//}
//
//def flutterRoot = localProperties.getProperty('flutter.sdk')
//if(flutterRoot == null) {
//  throw new GradleException('Flutter SDK not found')
//}
//
//dependencies {
//  implementation "org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version"
//  compileOnly files("$flutterRoot/bin/cache/artifacts/engine/android-arm/flutter.jar")
//  compileOnly 'androidx.annotation:annotation:1.1.0'
//}
